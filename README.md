# 数学小勇士 - 沪教版数学练习游戏

一款专为小学生设计的数学练习游戏应用，基于**沪教版**数学课程，支持1-6年级，默认四年级。通过游戏化的奖励机制，让孩子爱上数学练习！

## 功能特色

### 题目系统
- **沪教版课程对齐**：1-6年级题目严格按照沪教版教材范围设计
- **由简入难**：每轮10题，前3题简单、中间3题中等、后3题较难、最后1题挑战
- **多种题型**：
  - 加减乘除基础运算
  - 乘法口诀
  - 混合运算（含括号）
  - **加法交换律** / **加法结合律**
  - **乘法交换律** / **乘法结合律**
  - **乘法分配律**
  - **简便运算**（凑整、拆分等）
  - **连减简便运算**
  - 小数加减乘除（五年级）
  - 分数加减乘除（六年级）

### 错题重练
- 答错的题目会自动记录
- 针对错题类型再出10道类似题目
- 循环练习直到全部答对，彻底掌握

### 游戏化奖励
- **金币系统**：答对得金币，全对有额外奖励
- **经验值与等级**：Lv.1 到 Lv.25+，升级时有庆祝动画
- **连胜火焰**：连续全对显示火焰特效，奖励翻倍
- **成就徽章**：16个成就等你解锁（"初出茅庐"、"十连胜"、"千题大师"等）
- **商店系统**：用金币兑换酷炫称号和头像框
- **角色称号**：从"数学小白"升级到"数学之神"
- **每日登录**：连续练习天数记录

### 其他功能
- 音效反馈（可开关）
- 答题计时
- 星级评价（1-3星）
- 数据本地持久化，刷新不丢失
- **PWA 支持**：可安装到桌面/手机，离线也能用

## 安装与使用

### 环境要求
- [Node.js](https://nodejs.org/) 18 或更高版本
- npm（随 Node.js 一起安装）

### 方式一：本地开发运行

```bash
# 1. 克隆或进入项目目录
cd math-demo

# 2. 安装依赖
npm install

# 3. 启动开发服务器
npm run dev
```

启动后在浏览器打开 `http://localhost:5173` 即可使用。

### 方式二：构建后本地运行

```bash
# 1. 安装依赖
npm install

# 2. 构建生产版本
npm run build

# 3. 预览构建结果
npm run preview
```

启动后在浏览器打开 `http://localhost:4173` 即可使用。

### 方式三：安装为桌面/手机应用（PWA）

1. 使用 Chrome / Edge 浏览器打开应用
2. 地址栏右侧会出现"安装"图标，或浏览器会提示"安装应用"
3. 点击安装后，应用会出现在桌面/开始菜单中
4. 安装后可离线使用

> **提示**：PWA 安装需要 HTTPS 或 localhost 环境。本地开发时使用 `npm run dev` 即可。

### 方式四：部署到服务器

构建后的 `dist` 目录可以部署到任意静态文件服务器：

```bash
npm run build
# 将 dist 目录部署到你的服务器
```

支持的部署平台：Vercel、Netlify、GitHub Pages、Cloudflare Pages 等。

## 年级对应内容

| 年级 | 题目范围 |
|------|---------|
| 一年级 | 20以内加减法 |
| 二年级 | 100以内加减法，乘法口诀，加法交换律 |
| 三年级 | 1000以内运算，两位数乘除，乘法交换律，加法结合律，混合运算 |
| **四年级（默认）** | 万以内运算，乘法结合律，乘法分配律，简便运算，连减简便，带括号混合运算 |
| 五年级 | 小数加减乘除，分配律，简便运算综合 |
| 六年级 | 分数加减乘除，简便运算 |

## 技术栈

- React 18 + TypeScript
- Vite 5
- Tailwind CSS 3
- vite-plugin-pwa（PWA 支持）
- canvas-confetti（庆祝特效）
- Web Audio API（音效）

## 项目结构

```
src/
├── components/          # UI 组件
│   ├── HomePage.tsx     # 首页
│   ├── QuizPage.tsx     # 答题页
│   ├── ResultPage.tsx   # 结算页
│   ├── ShopPage.tsx     # 商店/成就页
│   └── ...              # 其他组件
├── contexts/
│   └── GameContext.tsx   # 全局游戏状态管理
├── utils/
│   ├── gradeConfig.ts   # 各年级题目配置
│   ├── questionGenerator.ts  # 题目生成器（含运算律）
│   ├── rewards.ts       # 奖励/成就/商店系统
│   ├── storage.ts       # localStorage 持久化
│   └── sound.ts         # 音效系统
├── App.tsx              # 主应用路由
├── main.tsx             # 入口
└── index.css            # 全局样式
```
